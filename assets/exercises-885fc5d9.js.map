{"version":3,"file":"exercises-885fc5d9.js","sources":["../../src/js/api.js","../../src/js/exercises.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = \"https://energyflow.b.goit.study/api\";\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getExercises (bodypart = \"\", muscles = \"\", equipment = \"\", keyword = \"\", page, limit){\n\n\n    const response = await axios.get(\"/exercises\", {\n       params: {\n           bodypart,\n           muscles,\n           equipment,\n           keyword,\n           page,\n           limit,\n       }\n   })\n   return response.data;\n   \n}\n\n\nexport async function getExercisesByBodyPart (bodypart, page = 1, limit = 200){\n    return getExercises(bodypart, \"\", \"\", \"\", page, limit);\n\n}\n\nexport async function getExercisesByMuscles ( muscles, page = 1, limit = 200){\n\n    return getExercises(\"\", muscles, \"\", \"\", page, limit);\n\n   \n}\n\nexport async function getExercisesByEquipment ( equipment, page = 1, limit = 200){\n\n    return getExercises(\"\", \"\", equipment, \"\", page, limit);\n}\n\nexport async function searchExercisesByWord (keyword, page = 1, limit = 200) { \n    return getExercises(\"\", \"\", \"\", keyword, page, limit)\n} ;\n\nexport async function getFilter (filter = \"Muscles\", page = 1, limit = 200){\n\n\n    const response = await axios.get(\"/filters\", {\n       params: {\n           filter,\n           page,\n           limit,\n       }\n   }\n   )\n   return response.data;\n}\n\nexport async function getExerciseById(id){\n    const response = await axios.get(`/exercises/${id}`);\n   \n    return response.data; \n}\n\nexport async function getQuote(){\n    const response = await axios.get(`/quote`);\n   \n    return response.data; \n}\n\nexport async function postSubscriptions(email){\n    const response = await axios.post('/subscription', { \"email\": email });\n    //409 error такий email вже підписаний\n    return response.data;\n}\n\nexport async function addExerciseRatingById(id, {email, rate, comment}){\n    const response = await axios.patch(`/exercises/${id}/rating`, { \"rate\": rate, \"email\": email, \"review\": comment });\n\n    return response;\n}","import * as api from './api.js';\n\nconst refs = {\n  filters: document.querySelector('.filters'),\n  exercises: document.querySelector('.exercises'),\n  navButtons: document.querySelector('.nav-buttons'),\n  musclesBtn: document.querySelector('.muscles-btn'),\n  execisesTitle: document.querySelector('.exercises-title')\n};\n\nlet page = 1;\nlet limit = 0;\nlet searchQuery = 'Muscles';\n\nfetchFilter();\nrefs.musclesBtn.classList.add('active-btn');\n\nrefs.filters.addEventListener('click', pressBtn);\nrefs.exercises.addEventListener('click', loadExercises);\n\nasync function fetchFilter() {\n  window.innerWidth < 768 ? (limit = 8) : (limit = 12);\n  const response = await api.getFilter(searchQuery, page, limit);\n\n  if (response.results.length === 0) {\n    refs.exercises.insertAdjacentHTML(\n      'beforeend',\n      `<p class=\"no-results-paragraph\">Unfortunately, <span class=\"no-results-span\">no results</span> were found. You may want to consider other search options to find the exercise you are looking for. Our range is wide and you have the opportunity to find more options that suit your needs.</p>`\n    );\n    return;\n  }\n  makeCards(response.results);\n  makeNavs(response.totalPages);\n}\n\nasync function pressBtn(event) {\nrefs.exercises.addEventListener('click', loadExercises);\nrefs.execisesTitle.innerHTML = `Exercises`;\n  if (event.target.tagName !== 'BUTTON') {\n    return;\n  }\n  page = 1;\n  refs.exercises.innerHTML = '';\n\n  const activeBtn = document.querySelector('.active-btn');\n  if (activeBtn) {\n    activeBtn.classList.remove('active-btn');\n  }\n  event.target.classList.add('active-btn');\n\n  searchQuery = event.target.innerHTML;\n  fetchFilter();\n}\n\nasync function makeCards(response) {\n  refs.exercises.innerHTML = '';\n  let markup = response\n    .map(({ name, filter, imgUrl }) => {\n      return `<li class=\"exercise\">\n        <img src=\"${imgUrl}\" alt=\"${name}\" loading=\"lazy\" class=\"exercise-image\">\n        <div class=\"exercise-info\">\n            <h1 class=\"exercise-subtitle\">${\n              name[0].toUpperCase() + name.slice(1)\n            }</h1>\n            <p class=\"exercise-filter\">${filter}</p>\n        </div>\n        </li>`;\n    })\n    .join('');\n\n  refs.exercises.insertAdjacentHTML('beforeend', markup);\n}\n\nasync function makeNavs(totalPages) {\n  let markup =\n    '<li><button class=\"nav-button active-nav-button\" type=\"button\">1</button></li>';\n  refs.navButtons.innerHTML = '';\n  for (let i = 2; i <= totalPages; i += 1) {\n    markup += `<li><button class=\"nav-button\" type=\"button\">${i}</button></li>`;\n  }\n  refs.navButtons.insertAdjacentHTML('beforeend', markup);\n}\n\nrefs.navButtons.addEventListener('click', async event => {\n  if (event.target.tagName !== 'BUTTON') {\n    return;\n  }\n  const activeBtn = document.querySelector('.active-nav-button');\n  if (activeBtn) {\n    activeBtn.classList.remove('active-nav-button');\n  }\n  event.target.classList.add('active-nav-button');\n  page = Number(event.target.innerHTML);\n  const response = await api.getFilter(searchQuery, page, limit);\n\n  makeCards(response.results);\n});\n\n\nasync function loadExercises(event) {\n  let filter = '';\n  let name = '';\n  let tag = event.target;\n  page = 1;\n\n  if (tag.tagName === 'IMG') {\n    tag = tag.nextElementSibling;\n  } \n  if (tag.tagName === 'LI' || tag.tagName === 'P' || tag.tagName === 'H1') {\n    tag = tag.offsetParent;\n  } \n\n  filter = tag.lastElementChild.innerHTML;\n  name = tag.firstElementChild.innerHTML.toLowerCase();\n  refs.execisesTitle.innerHTML = `Exercises / <span class=\"exercises-subtitle\">${name[0].toUpperCase() + name.slice(1)}</span>`\n  let resp = '';\n  switch (filter) {\n    case 'Muscles':\n      resp = await api.getExercisesByMuscles(name, page, limit);\n      break;\n    case 'Body parts':\n      resp = await api.getExercisesByBodyPart(name, page, limit);\n      break;\n    case 'Equipment':\n      resp = await api.getExercisesByEquipment(name, page, limit);\n      break;\n    default:\n      refs.exercises.insertAdjacentHTML(\n        'beforeend',\n        `<p class=\"no-results-paragraph\">Unfortunately, <span class=\"no-results-span\">no results</span> were found. You may want to consider other search options to find the exercise you are looking for. Our range is wide and you have the opportunity to find more options that suit your needs.</p>`\n      );\n\n    }\n        if (resp.results === undefined || resp.results.length === 0) {\n      console.log(resp)\n      refs.exercises.innerHTML = \n        `<p class=\"no-results-paragraph\">Unfortunately, <span class=\"no-results-span\">no results</span> were found. You may want to consider other search options to find the exercise you are looking for. Our range is wide and you have the opportunity to find more options that suit your needs.</p>`;\n      return;\n    }\n    refs.exercises.removeEventListener('click', loadExercises);\n\n  makeExercisesCards(resp.results);\n refs.navButtons.innerHTML = '';\n} \n\nasync function makeExercisesCards(response) {\n  refs.exercises.innerHTML = '';\n  const markup = response\n    .map(({ bodyPart, burnedCalories, name, rating, target, time }) => {\n      if (rating % 1 === 0) {\n        rating = rating + '.0';\n      }\n      return `<li class=\"exercise-information\">\n      <div>\n          <p class=\"tag\">Workout</p>\n          <span class=\"rating\">\n              ${rating}\n              <svg fill=\"#EEA10C\" width=\"18\" height=\"18\">\n                  <use href=\"../images/icon.svg#icon-star\"></use>\n              </svg>\n          </span>\n          <a href=\"\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"details-link\">\n              Start\n              <svg  width=\"14\" height=\"14\">\n                  <use href=\"../images/icon.svg#icon-arrow\"></use>\n              </svg>\n          </a>\n      </div>\n      <div>\n        <div class=\"icon-man-wrap\">\n          <svg class=\"icon-man\" fill=\"white\" width=\"15\" height=\"15\">\n          <use href=\"../images/icon.svg#icon-man\"></use>\n          </svg>\n        </div>\n        <h2 class=\"exercise-name\">${name[0].toUpperCase() + name.slice(1)}</h2>\n      </div>\n      <ul class=\"exercise-details\">\n          <li class=\"exercise-detail\">\n              <h3 class=\"detail-title\">Burned calories: </h3>\n              <p class=\"detail-value\">${burnedCalories} / ${time} min</p>\n          </li>\n          <li class=\"exercise-detail\">\n              <h3 class=\"detail-title\">Body part: </h3>\n              <p class=\"detail-value\">${\n                bodyPart[0].toUpperCase() + bodyPart.slice(1)\n              }</p>\n          </li>\n          <li class=\"exercise-detail\">\n              <h3 class=\"detail-title\">Target: </h3>\n              <p class=\"detail-value\">${\n                target[0].toUpperCase() + target.slice(1)\n              }</p>\n          </li>\n      </ul>\n  </li>`;\n    })\n    .join('');\n\n  refs.exercises.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["BASE_URL","axios","getExercises","bodypart","muscles","equipment","keyword","page","limit","getExercisesByBodyPart","getExercisesByMuscles","getExercisesByEquipment","getFilter","filter","refs","searchQuery","fetchFilter","pressBtn","loadExercises","response","api.getFilter","makeCards","makeNavs","event","activeBtn","markup","name","imgUrl","totalPages","i","tag","resp","api.getExercisesByMuscles","api.getExercisesByBodyPart","api.getExercisesByEquipment","makeExercisesCards","bodyPart","burnedCalories","rating","target","time"],"mappings":"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"}