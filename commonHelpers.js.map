{"version":3,"file":"commonHelpers.js","sources":["../src/js/localalStorageLogical.js","../src/js/favourite_exercises.js"],"sourcesContent":["export const LS_FAV = 'favourite';\n\nexport const setFav = arr => {\n  localStorage.setItem(LS_FAV, JSON.stringify(arr));\n};\n\nexport const getFav = key => {\n  try {\n    return JSON.parse(localStorage.getItem(key));\n  } catch (err) {\n    console.log(err.message);\n    //   add notification here in future instead of log\n  }\n};\n\nexport const removeFromFav = id => {\n  const filteredArr = getFav(LS_FAV).filter(obj => obj._id !== id);\n  localStorage.removeItem(LS_FAV);\n  localStorage.setItem(LS_FAV, JSON.stringify(filteredArr));\n};\n","// import handlerStartBtn from './exercises_card.js';\n\nimport {\n  getFav,\n  setFav,\n  removeFromFav,\n  LS_FAV,\n} from './localalStorageLogical.js';\n\nconst refs = {\n  cardSet: document.querySelector('.fav_card_list'),\n  noCards: document.querySelector('.no_cards_wrapper'),\n};\n\n// emulation\n\nconst demoObj1 = {\n  name: 'Air bike',\n  excDetails: {\n    burnedCalories: 13,\n    bodyPart: 'Waist',\n    target: 'Biceps',\n  },\n  _id: 1,\n  favourite: true,\n};\n\nconst demoObj2 = {\n  name: 'Stationary bike walk',\n  excDetails: {\n    burnedCalories: 116,\n    bodyPart: 'Cardio',\n    target: 'Cardiovascular system',\n  },\n  _id: 2,\n  favourite: false,\n};\n\nconst demoObj2_5 = {\n  name: 'Stationary bike walk',\n  excDetails: {\n    burnedCalories: 116,\n    bodyPart: 'Cardio',\n    target: 'Cardiovascular system',\n  },\n  _id: 2,\n  favourite: false,\n};\n\nconst demoObj3 = {\n  name: 'mcChicken burger',\n  excDetails: {\n    burnedCalories: -150,\n    bodyPart: 'Tummy',\n    target: 'Hunger',\n  },\n  _id: 3,\n};\n\nconst fav = [demoObj1, demoObj2, demoObj2_5, demoObj3];\n\nsetFav(fav);\n\n// render logic\n\nconst uniqueIdFilter = arr => {\n  const uniqueIds = new Set();\n  const newArray = arr.filter(obj => {\n    if (!uniqueIds.has(obj._id)) {\n      uniqueIds.add(obj._id);\n      return true;\n    }\n    return false;\n  });\n  return newArray;\n};\n\nconst renderCards = arr => {\n  const uniqueIdOnlyArray = uniqueIdFilter(arr);\n\n  const markup = uniqueIdOnlyArray.map(\n    ({ name, _id, excDetails: { burnedCalories, bodyPart, target } }) => {\n      return `<li data-id-card=\"${_id}\" data-component=\"fav_card\" class=\"list_item\">\n          <div class=\"fav_card\">\n            <div class=\"actions_wrapper\">\n              <div class=\"workout_wrapper\">\n                <span class=\"workout\">workout</span>\n                <button data-id-del-btn=\"${_id}\" data-action=\"delete_fav_card\" class=\"btn\">\n                  <svg width=\"16\" height=\"16\" aria-label=\"trash icon\">\n                    <use href=\"../images/icon.svg#icon-trash\"></use>\n                  </svg>\n                </button>\n              </div>\n              <button data-id-start-btn=\"${_id}\" data-action=\"start_exercise_btn\" class=\"btn\">\n                <span class=\"start\">start</span>\n                <svg width=\"16\" height=\"16\" aria-label=\"arrow icon\">\n                  <use href=\"../images/icon.svg#icon-arrow\"></use>\n                </svg>\n              </button>\n            </div>\n\n            <div class=\"inner_wrapper\">\n              <div class=\"icon_man\">\n                <svg width=\"16\" height=\"16\">\n                  <use href=\"../images/icon.svg#icon-man\"></use>\n                </svg>\n              </div>\n              <p class=\"exercise_name\">${name}</p>\n            </div>\n\n            <div class=\"details_wrapper\">\n              <ul class=\"details_list\">\n                <li>\n                  <div class=\"detail_wrapper\">\n                    <p class=\"detail_item\">\n                      Burned calories:\n                      <span class=\"detail_value\">${burnedCalories} / 3 min</span>\n                    </p>\n                  </div>\n                </li>\n                <li>\n                  <div class=\"detail_wrapper\">\n                    <p class=\"detail_item\">\n                      Body part: <span class=\"detail_value\">${bodyPart}</span>\n                    </p>\n                  </div>\n                </li>\n                <li>\n                  <div class=\"detail_wrapper\">\n                    <p class=\"detail_item\">\n                      Target: <span class=\"detail_value\">${target}</span>\n                    </p>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </li>`;\n    }\n  );\n\n  refs.cardSet.innerHTML = markup.join('');\n};\n\n// delete and start card logic\n\nconst onClick = e => {\n  const startBtn = e.target.closest('[data-action=\"start_exercise_btn\"]');\n  const deleteBtn = e.target.closest('[data-action=\"delete_fav_card\"]');\n  const cardComponent = e.target.closest('[data-component=\"fav_card\"]');\n\n  if (!e.target.tagName === 'BUTTON' || (!deleteBtn && !startBtn)) {\n    return;\n  }\n\n  if (deleteBtn) {\n    if (deleteBtn.dataset.idDelBtn === cardComponent.dataset.idCard) {\n      const idToRemove = Number(deleteBtn.dataset.idDelBtn);\n      removeFromFav(idToRemove);\n      checkStorage();\n    } else return;\n  } else if (startBtn) {\n    const startId = Number(startBtn.dataset.idStartBtn);\n    const arr = getFav(LS_FAV);\n    const outputObj = arr.find(obj => obj._id === startId);\n    handlerStartBtn(outputObj, true);\n  }\n};\n\n// check storage logic\n\nconst checkStorage = () => {\n  const isFavsExist = getFav(LS_FAV) !== null;\n\n  if (getFav(LS_FAV).some(obj => obj === null)) {\n    const arr = getFav(LS_FAV).filter(obj => obj !== null);\n    setFav(arr);\n  }\n  if (\n    localStorage.length === 0 ||\n    !isFavsExist ||\n    getFav(LS_FAV).length === 0\n  ) {\n    refs.noCards.classList.remove('visually-hidden');\n    refs.cardSet.classList.add('visually-hidden');\n    console.log('No Favs');\n  } else {\n    console.log('Favs there');\n    refs.noCards.classList.add('visually-hidden');\n    refs.cardSet.classList.remove('visually-hidden');\n    renderCards(getFav(LS_FAV));\n    refs.cardSet.addEventListener('click', onClick);\n  }\n};\n\ncheckStorage();\n"],"names":["LS_FAV","setFav","arr","getFav","key","err","removeFromFav","id","filteredArr","obj","refs","demoObj1","demoObj2","demoObj2_5","demoObj3","fav","uniqueIdFilter","uniqueIds","renderCards","markup","name","_id","burnedCalories","bodyPart","target","onClick","e","startBtn","deleteBtn","cardComponent","idToRemove","checkStorage","startId","outputObj","isFavsExist"],"mappings":"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"}